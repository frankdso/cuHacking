<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='/css/styleChat.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='/css/header.css')}}">
    <link href="{{ url_for('static', filename='/css/register.css')}}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <title>Eat and Earn</title>
</head>
<body>
  <div class="landing">
    <div id="chatbot-container" class="ngoListCont">
      <h1>Eat & Earn Chat Assistant</h1>
      <div id="chatbot-messages" style="height:200px; padding:5px; margin-bottom:10px;"></div>
      <input type="text" id="chatbot-input" placeholder="Type your message here..." style="width:100%; box-sizing:border-box;" />
      <button id="chatbot-send">Send</button>
    </div>
  </div>
  
  
  
  
  
  
  <script>
    const messagesDiv = document.getElementById('chatbot-messages');
    const inputField = document.getElementById('chatbot-input');
    const sendButton = document.getElementById('chatbot-send');

    sendButton.addEventListener('click', () => {
      const userMessage = inputField.value;
      if (!userMessage) return;
      appendMessage("You", userMessage);
      inputField.value = "";

      fetch('/web/gemini/chat', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({prompt: userMessage})
      })
      .then(response => response.json())
      .then(data => {
        appendMessage("Assistant", data.response);
      })
      .catch(error => {
        console.error("Error:", error);
      });
    });

    function appendMessage(sender, message) {
      const msgDiv = document.createElement('div');
      msgDiv.innerHTML = `<strong>${sender}:</strong> ${message}`;
      messagesDiv.appendChild(msgDiv);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
  </script>
</body>
</html>
